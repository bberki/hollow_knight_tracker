<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hollow Knight · 112% + Boss Tracker</title>
  <style>
    :root{--bg:#f6f7fb;--fg:#0f172a;--muted:#64748b;--card:#fff;--border:#e2e8f0;--accent:#111827}
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
    .container{max-width:1000px;margin:0 auto;padding:24px}
    h1{margin:0 0 8px;font-size:24px} .sub{color:var(--muted);margin:0 0 16px}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .btn{background:#fff;border:1px solid var(--border);padding:8px 12px;border-radius:12px;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border-color:var(--accent)}
    .input{flex:1;min-width:220px;background:#fff;border:1px solid var(--border);padding:8px 12px;border-radius:12px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden}
    .card-h{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
    .card-h h2{margin:0;font-size:16px} .chev{color:var(--muted)}
    .card-b{padding:8px 16px}
    .rowitem{display:flex;gap:10px;align-items:flex-start;padding:10px 0;border-top:1px solid var(--border)}
    .rowitem:first-child{border-top:0}
    label{cursor:pointer}
    .meta{color:var(--muted);font-size:12px}
    .note{width:100%;max-width:380px;border:1px solid var(--border);border-radius:10px;padding:6px 8px}
    .progress{height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .bar{height:100%;background:var(--accent);width:0}
    .footer{color:var(--muted);font-size:12px;margin-top:16px}
    .badge{font-size:11px;border:1px solid var(--border);border-radius:999px;padding:2px 8px;color:#111}
    .mandatory{background:#111;color:#fff;border-color:#111}
    .tabs{display:flex;gap:8px;margin:12px 0}
    .tab-btn{padding:8px 12px;border:1px solid var(--border);border-radius:12px;background:#fff;cursor:pointer}
    .tab-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="container">
    <h1>Hollow Knight · 112% + Boss Tracker</h1>
    <p class="sub">Keep everything in original English. Check items off and it stores locally in your browser.</p>

    <div class="tabs">
      <button id="tab-boss" class="tab-btn active">Bosses</button>
      <button id="tab-112" class="tab-btn">112% Checklist</button>
    </div>

    <!-- BOSS VIEW -->
    <div id="view-boss">
      <div class="row" style="margin-bottom:12px">
        <input id="q" class="input" placeholder="Search: boss or area" />
        <div class="row">
          <button class="btn" data-filter="all">All</button>
          <button class="btn" data-filter="next">Next</button>
          <button class="btn" data-filter="todo">Todo</button>
          <button class="btn" data-filter="done">Done</button>
          <button class="btn" data-filter="mandatory">Mandatory</button>
          <button class="btn" data-filter="optional">Optional</button>
        </div>
      </div>

      <div class="card" style="margin-bottom:12px">
        <div class="card-b">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
            <div style="font-weight:600">Progress</div>
            <div id="stat" class="sub"></div>
          </div>
          <div class="progress"><div id="bar" class="bar"></div></div>
        </div>
      </div>

      <div class="row" style="margin-bottom:12px">
        <button id="reset" class="btn">Reset</button>
        <button id="mark-mandatory" class="btn">Mark Mandatory Done</button>
        <button id="export" class="btn">Export</button>
        <label class="btn" style="position:relative;overflow:hidden">
          Import <input id="import" type="file" accept="application/json" style="position:absolute;inset:0;opacity:0;cursor:pointer" />
        </label>
      </div>

      <div id="root" class="space"></div>
    </div>

    <!-- 112% VIEW -->
    <div id="view-112" class="hidden">
      <div class="card" style="margin-bottom:12px">
        <div class="card-b">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
            <div style="font-weight:600">112% Progress</div>
            <div id="stat112" class="sub"></div>
          </div>
          <div class="progress"><div id="bar112" class="bar"></div></div>
        </div>
      </div>

      <div class="row" style="margin-bottom:12px">
        <button id="export112" class="btn">Export (112%)</button>
        <label class="btn" style="position:relative;overflow:hidden">
          Import (112%) <input id="import112" type="file" accept="application/json" style="position:absolute;inset:0;opacity:0;cursor:pointer" />
        </label>
        <button id="reset112" class="btn">Reset (112%)</button>
      </div>

      <div id="sec112"></div>
    </div>

    <div class="footer">* Stored in localStorage. You can export/import your progress anytime.</div>
  </div>

<script>
(function(){
  const STORAGE_KEY = 'hk-boss-tracker-v1-simple-en';
  const STORAGE_KEY_112 = 'hk-112-tracker-v1-en';

  // ---- Boss dataset (English/original names) ----
  const PHASE_ORDER = ['Early Game','Mid Game','Late Game','Final','Dream'];
  const BOSSES = [
    // Early
    {id:'false-knight', name:'False Knight', area:'Forgotten Crossroads', mandatory:true, phase:'Early Game', order:1},
    {id:'gruz-mother', name:'Gruz Mother', area:'Forgotten Crossroads', mandatory:false, phase:'Early Game', order:2},
    {id:'hornet-protector', name:'Hornet (Protector)', area:'Greenpath', mandatory:true, phase:'Early Game', order:3},

    // Mid
    {id:'mantis-lords', name:'Mantis Lords', area:'Fungal Wastes / Mantis Village', mandatory:false, phase:'Mid Game', order:4},
    {id:'soul-master', name:'Soul Master', area:'City of Tears', mandatory:true, phase:'Mid Game', order:5},
    {id:'dung-defender', name:'Dung Defender', area:'Royal Waterways', mandatory:false, phase:'Mid Game', order:6},
    {id:'broken-vessel', name:'Broken Vessel', area:'Ancient Basin', mandatory:true, phase:'Mid Game', order:7},
    {id:'crystal-guardian', name:'Crystal Guardian', area:'Crystal Peak', mandatory:false, phase:'Mid Game', order:8},
    {id:'watcher-knights', name:'Watcher Knights', area:"City of Tears / Watcher's Spire", mandatory:true, phase:'Mid Game', order:9},

    // Late
    {id:'nosk', name:'Nosk', area:'Deepnest', mandatory:false, phase:'Late Game', order:10},
    {id:'hornet-sentinel', name:'Hornet (Sentinel)', area:"Kingdom's Edge", mandatory:true, phase:'Late Game', order:11},
    {id:'traitor-lord', name:'Traitor Lord', area:"Queen's Gardens", mandatory:true, phase:'Late Game', order:12},
    {id:'uumuu', name:'Uumuu', area:'Fog Canyon / Teacher’s Archive', mandatory:true, phase:'Late Game', order:13},

    // Final
    {id:'hollow-knight', name:'The Hollow Knight', area:'Temple of the Black Egg', mandatory:true, phase:'Final', order:14},
    {id:'radiance', name:'Radiance', area:'Dream / Endgame', mandatory:false, phase:'Final', order:15},

    // Dream variants (optional)
    {id:'failed-champion', name:'Failed Champion (Dream)', area:'Forgotten Crossroads', mandatory:false, phase:'Dream', order:16},
    {id:'soul-tyrant', name:'Soul Tyrant (Dream)', area:'City of Tears', mandatory:false, phase:'Dream', order:17},
    {id:'lost-kin', name:'Lost Kin (Dream)', area:'Ancient Basin', mandatory:false, phase:'Dream', order:18},
    {id:'white-defender', name:'White Defender (Dream)', area:'Royal Waterways', mandatory:false, phase:'Dream', order:19},
    {id:'nkg', name:'Nightmare King Grimm', area:'Grimm Troupe', mandatory:false, phase:'Dream', order:20},
  ];

  // ---- Boss state & UI ----
  let state = load();
  const els = {
    root: document.getElementById('root'),
    q: document.getElementById('q'),
    stat: document.getElementById('stat'),
    bar: document.getElementById('bar'),
    reset: document.getElementById('reset'),
    markMandatory: document.getElementById('mark-mandatory'),
    exportBtn: document.getElementById('export'),
    importInput: document.getElementById('import'),
  };

  function load(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {done:{}, notes:{}, filter:'next'} }catch{ return {done:{}, notes:{}, filter:'next'} } }
  function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }

  function nextBossId(){ const sorted=[...BOSSES].sort((a,b)=>a.order-b.order); const n=sorted.find(b=>!state.done[b.id]); return n && n.id; }

  function renderBosses(){
    const q = els.q.value.trim().toLowerCase();
    const filter = state.filter || 'next';
    let list = BOSSES.filter(b=>{ if(!q) return true; return b.name.toLowerCase().includes(q) || b.area.toLowerCase().includes(q); });
    const next = nextBossId();
    list = list.filter(b=>{ const isDone=!!state.done[b.id]; switch(filter){ case 'all': return true; case 'next': return b.id===next || (!isDone && !next); case 'todo': return !isDone; case 'done': return isDone; case 'mandatory': return b.mandatory; case 'optional': return !b.mandatory; default: return true; } });

    const groups = {}; list.forEach(b=>{ (groups[b.phase] ||= []).push(b); }); for(const k in groups){ groups[k].sort((a,b)=>a.order-b.order); }

    const total=BOSSES.length; const done=BOSSES.filter(b=>state.done[b.id]).length; const pct=Math.round(done/total*100); els.stat.textContent=`${done}/${total} · ${pct}%`; els.bar.style.width=pct+'%';

    els.root.innerHTML='';
    PHASE_ORDER.filter(p=>groups[p]?.length).forEach(phase=>{
      const sec = h('div',{class:'card',style:'margin-bottom:12px'});
      const head = h('div',{class:'card-h'});
      head.appendChild(h('h2',{}, phase));
      head.appendChild(h('div',{class:'sub'}, `${(groups[phase].filter(b=>state.done[b.id]).length)||0}/${groups[phase].length}`));
      sec.appendChild(head);

      const body = h('div',{class:'card-b'});
      groups[phase].forEach(b=>{
        const row = h('div',{class:'rowitem'});
        const cb = h('input',{type:'checkbox'});
        cb.checked = !!state.done[b.id];
        cb.addEventListener('change',()=>{ state.done[b.id]=cb.checked; save(); renderBosses(); });

        const info = h('label',{});
        const title = h('div',{}, b.name + (b.mandatory?' *':''));
        const meta = h('div',{class:'meta'}, b.area + ' ');
        meta.appendChild(h('span',{class:'badge '+(b.mandatory?'mandatory':'')}, b.mandatory?'Mandatory':'Optional'));
        info.appendChild(title); info.appendChild(meta);

        const note = h('input',{class:'note',placeholder:'Add a note (charms, route, difficulty…)'});
        note.value = state.notes?.[b.id] || '';
        note.addEventListener('input',()=>{ state.notes[b.id]=note.value; save(); });

        row.appendChild(cb); row.appendChild(info); row.appendChild(note);
        body.appendChild(row);
      });

      sec.appendChild(body); els.root.appendChild(sec);
    });
  }

  // Controls
  els.q.addEventListener('input', renderBosses);
  document.querySelectorAll('[data-filter]').forEach(btn=>{ btn.addEventListener('click',()=>{ state.filter = btn.dataset.filter; renderBosses(); }); });
  els.reset.addEventListener('click', ()=>{ if(confirm('Clear all boss progress?')){ state = {done:{}, notes:{}, filter:'next'}; save(); renderBosses(); }});
  els.markMandatory.addEventListener('click', ()=>{ BOSSES.filter(b=>b.mandatory).forEach(b=>state.done[b.id]=true); save(); renderBosses(); });
  els.exportBtn.addEventListener('click', ()=>{ const blob = new Blob([JSON.stringify(state,null,2)], {type:'application/json'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='hollow-knight-boss-progress.json'; a.click(); URL.revokeObjectURL(url); });
  els.importInput.addEventListener('change', (e)=>{ const f=e.target.files&&e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ try{ const p=JSON.parse(String(r.result)); state={done:p.done||{}, notes:p.notes||{}, filter:state.filter||'next'}; save(); renderBosses(); }catch{ alert('Invalid file'); } }; r.readAsText(f); });

  // ---- 112% DATA (original English names) ----
  const DATA112 = [
    { cat:'Dream Nail', items:[
      {id:'dn-acquire', label:'Dream Nail (acquire)'},
      {id:'dn-awoken', label:'Awoken Dream Nail (1800 Essence)'},
      {id:'dn-seer2400', label:'Seer final dialogue (2400 Essence)'}
    ]},
    { cat:'Dreamers', items:[
      {id:'dr-monomon', label:'Monomon the Teacher'},
      {id:'dr-lurien', label:'Lurien the Watcher'},
      {id:'dr-herrah', label:'Herrah the Beast'}
    ]},
    { cat:'Nail Upgrades', items:[
      {id:'nail-sharpened', label:'Sharpened Nail'},
      {id:'nail-channelled', label:'Channelled Nail'},
      {id:'nail-coiled', label:'Coiled Nail'},
      {id:'nail-pure', label:'Pure Nail'}
    ]},
    { cat:'Nail Arts', items:[
      {id:'art-great-slash', label:'Great Slash'},
      {id:'art-dash-slash', label:'Dash Slash'},
      {id:'art-cyclone', label:'Cyclone Slash'}
    ]},
    { cat:'Spells & Upgrades', items:[
      {id:'sp-vengeful', label:'Vengeful Spirit'},
      {id:'sp-shade-soul', label:'Shade Soul (upgrade)'},
      {id:'sp-dive', label:'Desolate Dive'},
      {id:'sp-descend', label:'Descending Dark (upgrade)'},
      {id:'sp-wraiths', label:'Howling Wraiths'},
      {id:'sp-abyss-shriek', label:'Abyss Shriek (upgrade)'}
    ]},
    { cat:'Mask Shards (16)', items:[
      {id:'ms-sly150', label:'Sly (150 Geo)'},
      {id:'ms-sly500', label:'Sly (500 Geo)'},
      {id:'ms-sly800', label:'Sly (800 Geo)'},
      {id:'ms-sly1500', label:'Sly (1500 Geo)'},
      {id:'ms-brooding-mawlek', label:'Brooding Mawlek reward'},
      {id:'ms-grub-5', label:'Grubfather (5 grubs)'},
      {id:'ms-crossroads-goams', label:'Crossroads – Goam room'},
      {id:'ms-queens-station', label:"Queen's Station – east"},
      {id:'ms-bretta', label:"Bretta's house"},
      {id:'ms-stone-sanctuary', label:'Greenpath – Stone Sanctuary'},
      {id:'ms-waterways-nw', label:'Royal Waterways – northwest (acid)'},
      {id:'ms-fungal-core', label:'Fungal Core path'},
      {id:'ms-enraged-guardian', label:'Enraged Guardian reward'},
      {id:'ms-hive', label:'The Hive secret wall'},
      {id:'ms-seer1500', label:'Seer (1500 Essence)'},
      {id:'ms-grey-mourner', label:'Grey Mourner – Delicate Flower'}
    ]},
    { cat:'Vessel Fragments (9)', items: Array.from({length:9},(_,i)=>({id:`vf-${i+1}`, label:`Vessel Fragment #${i+1}`})) },
    { cat:'Stag Stations (11)', items:[
      {id:'stag-dirtmouth', label:'Dirtmouth'},
      {id:'stag-crossroads', label:'Forgotten Crossroads'},
      {id:'stag-greenpath', label:'Greenpath'},
      {id:'stag-queens-station', label:"Queen's Station"},
      {id:'stag-storerooms', label:'City Storerooms'},
      {id:'stag-kings-station', label:"King's Station"},
      {id:'stag-resting', label:'Resting Grounds'},
      {id:'stag-distant', label:'Distant Village'},
      {id:'stag-ancient-basin', label:'Ancient Basin'},
      {id:'stag-deepnest', label:'Deepnest Connection'},
      {id:'stag-nest', label:'Stag Nest (secret)'}
    ]},
    { cat:'Colosseum of Fools', items:[
      {id:'col-trial1', label:'Trial of the Warrior'},
      {id:'col-trial2', label:'Trial of the Conqueror'},
      {id:'col-trial3', label:'Trial of the Fool'}
    ]},
    { cat:'Grimm Troupe', items:[
      {id:'grimm-summon', label:'Summon the Troupe'},
      {id:'grimm-tmg', label:'Troupe Master Grimm'},
      {id:'grimm-path', label:'Choose: Banish or Nightmare King Grimm'}
    ]},
    { cat:'Godhome (for 112% — first 4 Pantheons)', items:[
      {id:'gh-p1', label:'Pantheon 1'},
      {id:'gh-p2', label:'Pantheon 2'},
      {id:'gh-p3', label:'Pantheon 3'},
      {id:'gh-p4', label:'Pantheon 4'}
    ]},
    { cat:'Warrior Dreams (7)', items:[
      {id:'wd-gorb', label:'Gorb'},
      {id:'wd-no-eyes', label:'No Eyes'},
      {id:'wd-elder-hu', label:'Elder Hu'},
      {id:'wd-xero', label:'Xero'},
      {id:'wd-galien', label:'Galien'},
      {id:'wd-marmu', label:'Marmu'},
      {id:'wd-markoth', label:'Markoth'}
    ]},
    { cat:'Whispering Roots (15)', items:[
      {id:'wr-ancestral', label:'Ancestral Mound'},
      {id:'wr-city', label:'City of Tears'},
      {id:'wr-crystal', label:'Crystal Peak'},
      {id:'wr-deepnest', label:'Deepnest'},
      {id:'wr-forgotten', label:'Forgotten Crossroads'},
      {id:'wr-fungal1', label:'Fungal Wastes (Leg Eater)'},
      {id:'wr-fungal2', label:'Fungal Wastes (Mantis Village)'},
      {id:'wr-greenpath', label:'Greenpath'},
      {id:'wr-hive', label:'The Hive'},
      {id:'wr-queens-gardens', label:"Queen's Gardens"},
      {id:'wr-resting', label:'Resting Grounds'},
      {id:'wr-howling', label:'Howling Cliffs'},
      {id:'wr-kingdoms-edge', label:"Kingdom's Edge"},
      {id:'wr-waterways', label:'Royal Waterways'},
      {id:'wr-ancient-basin', label:'Ancient Basin'}
    ]},
    { cat:'Grubs (46)', items: Array.from({length:46},(_,i)=>({id:`grub-${i+1}`, label:`Grub #${i+1}`})) },
    { cat:'Charms (45)', items:[
      'Wayward Compass','Gathering Swarm','Stalwart Shell','Soul Catcher','Shaman Stone','Soul Eater','Dashmaster','Sprintmaster','Grubsong','Grubberfly\'s Elegy','Fragile Heart','Fragile Greed','Fragile Strength','Unbreakable Heart','Unbreakable Greed','Unbreakable Strength','Spell Twister','Steady Body','Heavy Blow','Quick Slash','Longnail','Mark of Pride','Baldur Shell','Thorns of Agony','Fury of the Fallen','Quick Focus','Deep Focus','Lifeblood Heart','Lifeblood Core','Joni\'s Blessing','Hiveblood','Spore Shroom','Sharp Shadow','Shape of Unn','Nailmaster\'s Glory','Dream Wielder','Dreamshield','Glowing Womb','Defender\'s Crest','Flukenest','Weaversong','Grimmchild','Carefree Melody','Kingsoul','Void Heart'
    ].map((name,idx)=>({id:`ch-${idx+1}`, label:name})) }
  ];

  // ---- 112% state & UI ----
  let state112 = load112();
  const el112 = {
    sec: document.getElementById('sec112'),
    stat: document.getElementById('stat112'),
    bar: document.getElementById('bar112'),
    exportBtn: document.getElementById('export112'),
    importInput: document.getElementById('import112'),
    reset: document.getElementById('reset112')
  };
  function load112(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY_112)) || {done:{}} }catch{ return {done:{}} } }
  function save112(){ localStorage.setItem(STORAGE_KEY_112, JSON.stringify(state112)); }

  function render112(){
    const root = el112.sec; root.innerHTML='';
    let total=0, done=0; DATA112.forEach(g=>{ total+=g.items.length; done+=g.items.filter(it=>state112.done[it.id]).length; });
    const pct = Math.round(done/total*100); el112.stat.textContent = `${done}/${total} · ${pct}%`; el112.bar.style.width = pct+'%';
    DATA112.forEach(group=>{
      const sec = h('div',{class:'card',style:'margin-bottom:12px'});
      const head = h('div',{class:'card-h'});
      head.appendChild(h('h2',{}, group.cat));
      head.appendChild(h('div',{class:'sub'}, `${group.items.filter(it=>state112.done[it.id]).length}/${group.items.length}`));
      sec.appendChild(head);
      const body = h('div',{class:'card-b'});
      group.items.forEach(item=>{ const row=h('div',{class:'rowitem'}); const cb=h('input',{type:'checkbox'}); cb.checked=!!state112.done[item.id]; cb.addEventListener('change',()=>{ state112.done[item.id]=cb.checked; save112(); render112(); }); const label=h('label',{}, item.label); row.appendChild(cb); row.appendChild(label); body.appendChild(row); });
      sec.appendChild(body); root.appendChild(sec);
    });
  }

  // Tabs
  const tabBoss = document.getElementById('tab-boss');
  const tab112 = document.getElementById('tab-112');
  const viewBoss = document.getElementById('view-boss');
  const view112 = document.getElementById('view-112');
  tabBoss.addEventListener('click',()=>{ tabBoss.classList.add('active'); tab112.classList.remove('active'); viewBoss.classList.remove('hidden'); view112.classList.add('hidden'); });
  tab112.addEventListener('click',()=>{ tab112.classList.add('active'); tabBoss.classList.remove('active'); view112.classList.remove('hidden'); viewBoss.classList.add('hidden'); });

  function h(tag, attrs={}, text){ const el=document.createElement(tag); for(const k in attrs){ if(attrs[k]!==undefined) el.setAttribute(k, attrs[k]); } if(text!==undefined) el.textContent=text; return el; }

  // initial renders
  renderBosses();
  render112();
})();
</script>
</body>
</html>
